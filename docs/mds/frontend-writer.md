页面资源规范
---
#### 图标
- 所有要使用的图标，均须打包为woff,woff2两种字体。
- UI 出的svg图标须遵循以下规范，以供前端打包字体:
    - viewBox="0 0 1024 1024"
    - width=200
    - height=200



代码格式书写规范
---
###  注释
- 保证优良的注释规范，每个字段，每个方法都需要注释；

#### 模块化
- 所有页面内容元素应写成，父子结构，禁止父子孙3层结构

    目录结构
- dome //主页面
  - children1 //子组件
  - children2 //子组件
  - children3 //子组件
  
#### html
-   一行内禁止出现多个标签，每个标签应有自己的独立行。
-   标签缩进，子标签与父级之前，需要有明确的缩进体现。
-   标签内存在多属性方法时，应该换行书写各属性方法

#### css sass
- 禁止出现颜色的直接赋值,所有颜色均需基于颜色变量。
- 禁止出现字体大小的直接赋值,所有字体大小均需基于字体大小的变量。
- 禁止出现margin和padding的直接赋值,所有margin和padding均需基于margin和padding的变量。
- 项目的颜色变量，只能由项目leader维护。其余成员，可以基于现有方法变换颜色，但不能修改基础色值，也不能自建颜色变换方法。
- 样式类除`border`值和`1px`外，禁止出现`px`做为大小单位。一般的大小单位，都应该指定为`rem`,`em`。
- html上不准出现工具类样式如"m-4 p-1"等等

#### typescript
所有项目的前端语言，若无特殊要求，必须采用`Typescript`。

typescript中必须注明的类型`（不能使用any类型）`：

- 具有返回值的函数，必须书写返回类型。
- 接受callback的函数，必须书写callback类型。
- 组件的接受值。
- 组件的emit值。
- 与接口相关的数据，必须建立数据的Interface。
- 无法确定的类，才能使用（any）类型
- 引用数据时，不应直接赋值，应：
   对象 let obj2 = JSON.parse(JSON.stringify(obj1))
        let b = Object.assign({}, a)
        
   数组  var a = ['qqq','www','eee'];
         var b = a.slice();     


#### 前端业务场景
- 弹窗搜索 关闭弹窗应清除搜索条件，重置表格数据
- 不搜索时，不能刷新列表
- 弹出框类的编辑查看，需要可切换
- 有新增，就可以删除，保存就不能修改
- 枚举值居中，非固定长度如（备注，说明等）值居左
- 按钮 默认圆角按钮
- 按钮 默认没有引导色
- 图标 默认图标空心
- 所有列表应该有排序功能
- 每个页面要有子标题
- 列表修改完数据不点保存，主页面的数据不能一起变动，只有保存后，主页面数据才应该一起改变
- 弹窗修改列表数据，保存后。列表数据更新，但不是通过接口刷新数据，而是直接修改json数据
- 默认没有取消按钮，使用右上角 X 按钮
- 按钮（确认，保存）默认靠右
- 用数据字典时，不能用硬编码，要用定义好的字典常量
- 涉及到状态变化的，需要提示框确认


代码功能书写规范
---
#### 接口请求
- request param
    
    - typescript 每个接口参数都应该有相应的**Interface**
    - 时间参数遵循 `yyyy/MM/dd HH:mm:ss`结构
    - Long 型数据，以字符串形式处理
- request header

    session 统一key命名：`cm-auth-ticket`

- response status 
    
    - 状态码200 均为成功
    - 状态码400 为接口错误响应    
    - 其余状态码均为网络异常引起 
    
- response body
    `http status`200时，可直接读取body值，为可用返回结果。`http status 400`时需根据返回type，进行相应的前端响应。见`错误状态返回格式`； `该规范只在有对应的后端规范时才生效`

>  **错误状态返回格式**

> *前端根据不同type进行错误判断。一般不使用后端给出的message,由前端自行组织响应逻辑。*
```
{
    int type,    //状态码
    String message, //提示语
    String content, //内容 
}
```
- response type
    
    所有请求返回类型，都必须为`Obervable<T>`。

#### 资源引入

- 非全局资源禁止直接在`index.html`中引入标签。
- 私有页面需经标签引入的`JS，CSS`。需考虑异步加载是否成功。
- 私有页面有经`import`或`require`引入私有资源的，必须将该页面设置为异步模块，进行惰性加载。

#### 页面逻辑
> 该规范可能属于需求规范，故仅供参考
- 所有类似主页面进入次级页面时，若无特殊需求，主页面都应该得到缓存。包括`数据信息,滚动位置，操作状态`等。
- 次级页面返回主页面时，主页面的缓存状态，必须得到复现。
- 次级页面返回主页面时，若次级页面有曾发生数据更改，则主页面上不能出现与之违背的信息显示。


#### 页面布局

- Flex

    `flex:auto`或`flex:1`的子元素，若要指定`100%`高/宽，则必须采用绝对布局。
    
#### 输入控制
- 所有input输入框，都应有size限制
- 所有textarea 输入框，都应有size和rows限制。


#### IOS兼容性

- 禁止解析带`-`的时间字符串。
- 校验滚动体惯性是否存在，`-webkit-overflow-scrolling:touch`
- 禁用输入框皮肤：`-webkit-appearance:none`
- 禁用点击阴影：`-webkit-tap-highlight-color:transparent`


PC特异性规范
---

#### vuex 数据管理
权限、账号信息等全局数据，必须经vuex完成统一管理。

#### 惰性加载
所有页面均须通过`Import`引入。



APP特异性规范
---

#### ngrx 数据管理

- **所有服务器请求都必须经ngrx发起`action`。**
- 所有服务器请求得到的数据，都必须直接或经处理后，存放于`ngrx`的`state`对象里。
- 必须遵循`ngrx`数据管理原则，禁止直接修改`state`。


#### 功能模块惰性加载

- 组织各功能`module`,每个页面功能`module`必须进行异步加载。
- 预加载，项目类必须组织功能模板的预加载。


